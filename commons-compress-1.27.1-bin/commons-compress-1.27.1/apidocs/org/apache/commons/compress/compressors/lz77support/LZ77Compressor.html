<!DOCTYPE HTML>
<html lang>
<head>
<!-- Generated by javadoc (17) -->
<title>LZ77Compressor (Apache Commons Compress 1.27.1 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="description" content="declaration: package: org.apache.commons.compress.compressors.lz77support, class: LZ77Compressor">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/LZ77Compressor.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.commons.compress.compressors.lz77support</a></div>
<h1 title="Class LZ77Compressor" class="title">Class LZ77Compressor</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.apache.commons.compress.compressors.lz77support.LZ77Compressor</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name"><a href="../../../../../../src-html/org/apache/commons/compress/compressors/lz77support/LZ77Compressor.html#line-79">LZ77Compressor</a></span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">Helper class for compression algorithms that use the ideas of LZ77.

 <p>
 Most LZ77 derived algorithms split input data into blocks of uncompressed data (called literal blocks) and back-references (pairs of offsets and lengths)
 that state "add <code>length</code> bytes that are the same as those already written starting <code>offset</code> bytes before the current position. The details of how
 those blocks and back-references are encoded are quite different between the algorithms and some algorithms perform additional steps (Huffman encoding in the
 case of DEFLATE for example).
 </p>

 <p>
 This class attempts to extract the core logic - finding back-references - so it can be re-used. It follows the algorithm explained in section 4 of RFC 1951
 (DEFLATE) and currently doesn't implement the "lazy match" optimization. The three-byte hash function used in this class is the same as the one used by zlib
 and InfoZIP's ZIP implementation of DEFLATE. The whole class is strongly inspired by InfoZIP's implementation.
 </p>

 <p>
 LZ77 is used vaguely here (as well as many other places that talk about it :-), LZSS would likely be closer to the truth but LZ77 has become the synonym for
 a whole family of algorithms.
 </p>

 <p>
 The API consists of a compressor that is fed <code>byte</code>s and emits <a href="LZ77Compressor.Block.html" title="class in org.apache.commons.compress.compressors.lz77support"><code>LZ77Compressor.Block</code></a>s to a registered callback where the blocks represent either
 <a href="LZ77Compressor.LiteralBlock.html" title="class in org.apache.commons.compress.compressors.lz77support"><code>literal blocks</code></a>, <a href="LZ77Compressor.BackReference.html" title="class in org.apache.commons.compress.compressors.lz77support"><code>back-references</code></a> or <a href="LZ77Compressor.EOD.html" title="class in org.apache.commons.compress.compressors.lz77support"><code>end of data markers</code></a>. In order to ensure the callback receives all
 information, the <code>#finish</code> method must be used once all data has been fed into the compressor.
 </p>

 <p>
 Several parameters influence the outcome of the "compression":
 </p>
 <dl>

 <dt><code>windowSize</code></dt>
 <dd>the size of the sliding window, must be a power of two - this determines the maximum offset a back-reference can take. The compressor maintains a buffer
 of twice of <code>windowSize</code> - real world values are in the area of 32k.</dd>

 <dt><code>minBackReferenceLength</code></dt>
 <dd>Minimal length of a back-reference found. A true minimum of 3 is hard-coded inside of this implementation but bigger lengths can be configured.</dd>

 <dt><code>maxBackReferenceLength</code></dt>
 <dd>Maximal length of a back-reference found.</dd>

 <dt><code>maxOffset</code></dt>
 <dd>Maximal offset of a back-reference.</dd>

 <dt><code>maxLiteralLength</code></dt>
 <dd>Maximal length of a literal block.</dd>
 </dl></div>
<dl class="notes">
<dt>Since:</dt>
<dd>1.14</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li>"https://tools.ietf.org/html/rfc1951#section-4"</li>
</ul>
</dd>
<dt>This class is not thread-safe</dt>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final class&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="LZ77Compressor.BackReference.html" class="type-name-link" title="class in org.apache.commons.compress.compressors.lz77support">LZ77Compressor.BackReference</a></code></div>
<div class="col-last even-row-color">
<div class="block">Represents a back-reference.</div>
</div>
<div class="col-first odd-row-color"><code>static class&nbsp;</code></div>
<div class="col-second odd-row-color"><code><a href="LZ77Compressor.Block.html" class="type-name-link" title="class in org.apache.commons.compress.compressors.lz77support">LZ77Compressor.Block</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Base class representing blocks the compressor may emit.</div>
</div>
<div class="col-first even-row-color"><code>static interface&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="LZ77Compressor.Callback.html" class="type-name-link" title="interface in org.apache.commons.compress.compressors.lz77support">LZ77Compressor.Callback</a></code></div>
<div class="col-last even-row-color">
<div class="block">Callback invoked while the compressor processes data.</div>
</div>
<div class="col-first odd-row-color"><code>static final class&nbsp;</code></div>
<div class="col-second odd-row-color"><code><a href="LZ77Compressor.EOD.html" class="type-name-link" title="class in org.apache.commons.compress.compressors.lz77support">LZ77Compressor.EOD</a></code></div>
<div class="col-last odd-row-color">
<div class="block">A simple "we are done" marker.</div>
</div>
<div class="col-first even-row-color"><code>static final class&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="LZ77Compressor.LiteralBlock.html" class="type-name-link" title="class in org.apache.commons.compress.compressors.lz77support">LZ77Compressor.LiteralBlock</a></code></div>
<div class="col-last even-row-color">
<div class="block">Represents a literal block of data.</div>
</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(org.apache.commons.compress.compressors.lz77support.Parameters,org.apache.commons.compress.compressors.lz77support.LZ77Compressor.Callback)" class="member-name-link">LZ77Compressor</a><wbr>(<a href="Parameters.html" title="class in org.apache.commons.compress.compressors.lz77support">Parameters</a>&nbsp;params,
 <a href="LZ77Compressor.Callback.html" title="interface in org.apache.commons.compress.compressors.lz77support">LZ77Compressor.Callback</a>&nbsp;callback)</code></div>
<div class="col-last even-row-color">
<div class="block">Initializes a compressor with parameters and a callback.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#compress(byte%5B%5D)" class="member-name-link">compress</a><wbr>(byte[]&nbsp;data)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Feeds bytes into the compressor which in turn may emit zero or more blocks to the callback during the execution of this method.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#compress(byte%5B%5D,int,int)" class="member-name-link">compress</a><wbr>(byte[]&nbsp;data,
 int&nbsp;off,
 int&nbsp;len)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Feeds bytes into the compressor which in turn may emit zero or more blocks to the callback during the execution of this method.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#finish()" class="member-name-link">finish</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Tells the compressor to process all remaining data and signal end of data to the callback.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#prefill(byte%5B%5D)" class="member-name-link">prefill</a><wbr>(byte[]&nbsp;data)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Adds some initial data to fill the window with.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#clone--" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#equals-java.lang.Object-" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#finalize--" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#getClass--" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#hashCode--" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notify--" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notifyAll--" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#toString--" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait--" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-int-" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(org.apache.commons.compress.compressors.lz77support.Parameters,org.apache.commons.compress.compressors.lz77support.LZ77Compressor.Callback)">
<h3>LZ77Compressor</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/commons/compress/compressors/lz77support/LZ77Compressor.html#line-279">LZ77Compressor</a></span><wbr><span class="parameters">(<a href="Parameters.html" title="class in org.apache.commons.compress.compressors.lz77support">Parameters</a>&nbsp;params,
 <a href="LZ77Compressor.Callback.html" title="interface in org.apache.commons.compress.compressors.lz77support">LZ77Compressor.Callback</a>&nbsp;callback)</span></div>
<div class="block">Initializes a compressor with parameters and a callback.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>params</code> - the parameters</dd>
<dd><code>callback</code> - the callback</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/NullPointerException.html" title="class or interface in java.lang" class="external-link">NullPointerException</a></code> - if either parameter is <code>null</code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="compress(byte[])">
<h3>compress</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/commons/compress/compressors/lz77support/LZ77Compressor.html#line-346">compress</a></span><wbr><span class="parameters">(byte[]&nbsp;data)</span>
              throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Feeds bytes into the compressor which in turn may emit zero or more blocks to the callback during the execution of this method.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>data</code> - the data to compress - must not be null</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - if the callback throws an exception</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="compress(byte[],int,int)">
<h3>compress</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/commons/compress/compressors/lz77support/LZ77Compressor.html#line-358">compress</a></span><wbr><span class="parameters">(byte[]&nbsp;data,
 int&nbsp;off,
 int&nbsp;len)</span>
              throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Feeds bytes into the compressor which in turn may emit zero or more blocks to the callback during the execution of this method.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>data</code> - the data to compress - must not be null</dd>
<dd><code>off</code> - the start offset of the data</dd>
<dd><code>len</code> - the number of bytes to compress</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - if the callback throws an exception</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="finish()">
<h3>finish</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/commons/compress/compressors/lz77support/LZ77Compressor.html#line-395">finish</a></span>()
            throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Tells the compressor to process all remaining data and signal end of data to the callback.

 <p>
 The compressor will in turn emit at least one block (<a href="LZ77Compressor.EOD.html" title="class in org.apache.commons.compress.compressors.lz77support"><code>LZ77Compressor.EOD</code></a>) but potentially multiple blocks to the callback during the execution of this method.
 </p></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - if the callback throws an exception</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="prefill(byte[])">
<h3>prefill</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../../src-html/org/apache/commons/compress/compressors/lz77support/LZ77Compressor.html#line-528">prefill</a></span><wbr><span class="parameters">(byte[]&nbsp;data)</span></div>
<div class="block">Adds some initial data to fill the window with.

 <p>
 This is used if the stream has been cut into blocks and back-references of one block may refer to data of the previous block(s). One such example is the
 LZ4 frame format using block dependency.
 </p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>data</code> - the data to fill the window with.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - if the compressor has already started to accept data</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2002&#x2013;2024 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
